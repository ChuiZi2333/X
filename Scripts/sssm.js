/******************************************
 * @name Áª≥Â∏àùêíùêå
 * @description Ëß£ÈîÅ‰ºöÂëòËßÜÈ¢ë
 * @channel https://t.me/yqc_123
 * @feedback https://t.me/yqc_777
 * @version 1.0.1
******************************************

## ËÑöÊú¨Ê≥®Êòé

1. ËÑöÊú¨Âè™ÊòØÈíàÂØπÂü∫‰∫é Quantumult X Âíå Surge ÂØπ Javascript Âíå WEB ÈÄÜÂêëÁöÑÂ≠¶‰π†Ôºå‰∏çÂæóÁî®‰∫éÂïÜ‰∏öÁî®ÈÄîÔºåÂê¶ÂàôÂêéÊûúËá™Ë¥ü„ÄÇ
2. ‰∏ç‰øùËØÅËÑöÊú¨ÂêàÊ≥ïÊÄß„ÄÅÂáÜÁ°ÆÊÄß„ÄÅÊúâÊïàÊÄßÔºåËØ∑Ê†πÊçÆÊÉÖÂÜµËá™Ë°åÂà§Êñ≠ÔºåÊú¨‰∫∫ÂØπÊ≠§‰∏çÊâøÊãÖ‰ªª‰Ωï‰øùËØÅË¥£‰ªª„ÄÇ
3. Êú¨‰∫∫ÂØπ‰ªª‰ΩïËÑöÊú¨ÂºïÂèëÁöÑÈóÆÈ¢òÊ¶Ç‰∏çË¥üË¥£ÔºåÂåÖÊã¨‰ΩÜ‰∏çÈôê‰∫éÁî±ËÑöÊú¨ÈîôËØØÂºïËµ∑ÁöÑ‰ªª‰ΩïÊçüÂ§±ÂíåÊçüÂÆ≥„ÄÇ
4. ËΩ¨ËΩΩËÑöÊú¨ËØ∑Ê≥®ÊòéÊù•Ê∫êÔºåÊ¨¢ËøéÂàÜ‰∫´ÔºåÊãíÁªùÂÄíÂçñÔºåÂÄíÂçñ üêï ÂøÖÊ≠ª üêé„ÄÇ
5. Â¶ÇÊûú‰ªª‰ΩïÂçï‰ΩçÊàñ‰∏™‰∫∫ËÆ§‰∏∫Ê≠§ËÑöÊú¨ÂèØËÉΩÊ∂âÂ´å‰æµÁäØÂÖ∂ÊùÉÂà©ÔºåÂ∫îÂèäÊó∂ÈÄöÁü•Âπ∂Êèê‰æõË∫´‰ªΩËØÅÊòéÔºåÊâÄÊúâÊùÉËØÅÊòéÔºåÊàë‰ª¨Â∞ÜÂú®Êî∂Âà∞ËÆ§ËØÅÊñá‰ª∂Á°ÆËÆ§ÂêéÂà†Èô§Ê≠§ËÑöÊú¨„ÄÇ
6. ÊâÄÊúâÁõ¥Êé•ÊàñÈó¥Êé•‰ΩøÁî®„ÄÅÊü•ÁúãÊ≠§ËÑöÊú¨ÁöÑ‰∫∫ÂùáÂ∫îËØ•‰ªîÁªÜÈòÖËØªÊ≠§Â£∞Êòé, Êú¨‰∫∫‰øùÁïôÈöèÊó∂Êõ¥ÊîπÊàñË°•ÂÖÖÊ≠§Â£∞ÊòéÁöÑÊùÉÂà©, ‰∏ÄÊó¶ÊÇ®‰ΩøÁî®ÊàñÂ§çÂà∂‰∫ÜÊ≠§ËÑöÊú¨ÔºåÂç≥ËßÜ‰∏∫ÊÇ®Â∑≤Êé•ÂèóÊ≠§ÂÖçË¥£Â£∞Êòé„ÄÇ
7. Ê¨¢ËøéÂØπ[Êú¨‰ªìÂ∫ì](https://github.com/Yuheng0101/X)Star‚úÖÔºå‰ΩÜËØ∑‰∏çË¶Å Fork‚ùå„ÄÇ

[Áª≥Â∏àSM](https://syz.xn--fiq2km75ifcu.com/sssm.html?v=xboY40kLeg)

## Ëá¥Ë∞¢

[@Ëãç‰∫ïÁÅ∞ÁÅ∞](https://t.me/wangfei021325)

******************************************
hostname = *.sssm.info,*.cloudfront.net,*.ddosapi.cyou
# ÂéªÂπøÂëä ‚ûü ‰ºöÂØºËá¥ËÆøÈóÆËøõ‰∏çÂéªÈ°µÈù¢, ÂèØÁõ¥Êé•Âú®È°µÈù¢ÊãºÊé•pages/index_new/index_newËøõÂÖ•È¶ñÈ°µ ‚ûü ‰∏¥Êó∂Â±èËîΩÊéâ
# ^https?:\/\/.*(sssm|cloudfront|ddosapi).+\/api(\/v1|)\/banners url reject-200
# Ëß£ÈîÅ
^https?:\/\/.*(sssm|cloudfront|ddosapi).+\/api(\/v1|)\/videos(\/\w+|)\/show url script-request-header https://raw.githubusercontent.com/Yuheng0101/X/main/Scripts/sssm.js
# ‰∏™‰∫∫‰∏≠ÂøÉ
^https?:\/\/.*(sssm|cloudfront|ddosapi).+\/api(\/v1|)\/users\/get_profile url script-response-body https://raw.githubusercontent.com/Yuheng0101/X/main/Scripts/sssm.js

*/


const $ = new Env('ùêíùêíùêíùêå')
var _0xods='jsjiami.com.v7';function _0x107e(_0x381e4d,_0x146d20){const _0x11d113=_0x11d1();return _0x107e=function(_0x107e64,_0x9e5b19){_0x107e64=_0x107e64-0xf2;let _0x4597ec=_0x11d113[_0x107e64];if(_0x107e['BgAqGV']===undefined){var _0x6f60ad=function(_0x344457){const _0x3941bb='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x370e8a='',_0x233f85='';for(let _0x1e8f86=0x0,_0x544ab7,_0x13aa75,_0x83f7f4=0x0;_0x13aa75=_0x344457['charAt'](_0x83f7f4++);~_0x13aa75&&(_0x544ab7=_0x1e8f86%0x4?_0x544ab7*0x40+_0x13aa75:_0x13aa75,_0x1e8f86++%0x4)?_0x370e8a+=String['fromCharCode'](0xff&_0x544ab7>>(-0x2*_0x1e8f86&0x6)):0x0){_0x13aa75=_0x3941bb['indexOf'](_0x13aa75);}for(let _0x1e9bc4=0x0,_0x586ff1=_0x370e8a['length'];_0x1e9bc4<_0x586ff1;_0x1e9bc4++){_0x233f85+='%'+('00'+_0x370e8a['charCodeAt'](_0x1e9bc4)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x233f85);};const _0x6afb06=function(_0x4566b2,_0x43462a){let _0xf69058=[],_0x28810f=0x0,_0xfa96fd,_0x7f7114='';_0x4566b2=_0x6f60ad(_0x4566b2);let _0x1bb74e;for(_0x1bb74e=0x0;_0x1bb74e<0x100;_0x1bb74e++){_0xf69058[_0x1bb74e]=_0x1bb74e;}for(_0x1bb74e=0x0;_0x1bb74e<0x100;_0x1bb74e++){_0x28810f=(_0x28810f+_0xf69058[_0x1bb74e]+_0x43462a['charCodeAt'](_0x1bb74e%_0x43462a['length']))%0x100,_0xfa96fd=_0xf69058[_0x1bb74e],_0xf69058[_0x1bb74e]=_0xf69058[_0x28810f],_0xf69058[_0x28810f]=_0xfa96fd;}_0x1bb74e=0x0,_0x28810f=0x0;for(let _0x43f772=0x0;_0x43f772<_0x4566b2['length'];_0x43f772++){_0x1bb74e=(_0x1bb74e+0x1)%0x100,_0x28810f=(_0x28810f+_0xf69058[_0x1bb74e])%0x100,_0xfa96fd=_0xf69058[_0x1bb74e],_0xf69058[_0x1bb74e]=_0xf69058[_0x28810f],_0xf69058[_0x28810f]=_0xfa96fd,_0x7f7114+=String['fromCharCode'](_0x4566b2['charCodeAt'](_0x43f772)^_0xf69058[(_0xf69058[_0x1bb74e]+_0xf69058[_0x28810f])%0x100]);}return _0x7f7114;};_0x107e['rfnoTY']=_0x6afb06,_0x381e4d=arguments,_0x107e['BgAqGV']=!![];}const _0x539698=_0x11d113[0x0],_0x110df3=_0x107e64+_0x539698,_0x11691b=_0x381e4d[_0x110df3];return!_0x11691b?(_0x107e['yvAKOe']===undefined&&(_0x107e['yvAKOe']=!![]),_0x4597ec=_0x107e['rfnoTY'](_0x4597ec,_0x9e5b19),_0x381e4d[_0x110df3]=_0x4597ec):_0x4597ec=_0x11691b,_0x4597ec;},_0x107e(_0x381e4d,_0x146d20);}const _0xdd9d4d=_0x107e;if(function(_0x4652e0,_0x18b975,_0x4be35b,_0x3ae790,_0x2d60af,_0x356af1,_0x1300c2){return _0x4652e0=_0x4652e0>>0x7,_0x356af1='hs',_0x1300c2='hs',function(_0x1ce5ab,_0x344c14,_0x190a16,_0x446cef,_0x2d523a){const _0x5285e3=_0x107e;_0x446cef='tfi',_0x356af1=_0x446cef+_0x356af1,_0x2d523a='up',_0x1300c2+=_0x2d523a,_0x356af1=_0x190a16(_0x356af1),_0x1300c2=_0x190a16(_0x1300c2),_0x190a16=0x0;const _0x3bba85=_0x1ce5ab();while(!![]&&--_0x3ae790+_0x344c14){try{_0x446cef=-parseInt(_0x5285e3(0x10c,'72qK'))/0x1*(-parseInt(_0x5285e3(0x155,'#aI@'))/0x2)+parseInt(_0x5285e3(0x14d,'1p0J'))/0x3*(parseInt(_0x5285e3(0x199,'qhs['))/0x4)+-parseInt(_0x5285e3(0x19b,'#aI@'))/0x5*(parseInt(_0x5285e3(0x12d,'332S'))/0x6)+-parseInt(_0x5285e3(0x13b,'5R9f'))/0x7*(parseInt(_0x5285e3(0x116,'O]jN'))/0x8)+parseInt(_0x5285e3(0x133,'ooT]'))/0x9*(parseInt(_0x5285e3(0x146,'1Tk6'))/0xa)+parseInt(_0x5285e3(0x12b,'dW)a'))/0xb+-parseInt(_0x5285e3(0x124,'1Tk6'))/0xc*(parseInt(_0x5285e3(0x15e,'FBWb'))/0xd);}catch(_0x1d69ab){_0x446cef=_0x190a16;}finally{_0x2d523a=_0x3bba85[_0x356af1]();if(_0x4652e0<=_0x3ae790)_0x190a16?_0x2d60af?_0x446cef=_0x2d523a:_0x2d60af=_0x2d523a:_0x190a16=_0x2d523a;else{if(_0x190a16==_0x2d60af['replace'](/[UIXnTwFYKGVWESPteQLl=]/g,'')){if(_0x446cef===_0x344c14){_0x3bba85['un'+_0x356af1](_0x2d523a);break;}_0x3bba85[_0x1300c2](_0x2d523a);}}}}}(_0x4be35b,_0x18b975,function(_0xa5db60,_0x4d9fc5,_0x5537e6,_0x52608a,_0x159065,_0x425191,_0x40a689){return _0x4d9fc5='\x73\x70\x6c\x69\x74',_0xa5db60=arguments[0x0],_0xa5db60=_0xa5db60[_0x4d9fc5](''),_0x5537e6='\x72\x65\x76\x65\x72\x73\x65',_0xa5db60=_0xa5db60[_0x5537e6]('\x76'),_0x52608a='\x6a\x6f\x69\x6e',(0x14fdcf,_0xa5db60[_0x52608a](''));});}(0x6200,0x748e6,_0x11d1,0xc6),_0x11d1){}const debug=![],server=_0xdd9d4d(0x17a,'czWp'),[domain,host]=$request?.[_0xdd9d4d(0x10d,']L$Z')]?.[_0xdd9d4d(0x167,'FtEy')](/^(?:https?:\/\/)?([^\/\s]+)/)||[_0xdd9d4d(0x16a,'vKgm'),_0xdd9d4d(0x105,'T1bH')],statusMessages={0x190:'ËØ∑Ê±ÇÂèÇÊï∞ÈîôËØØ',0x191:_0xdd9d4d(0x171,'1p0J'),0x193:_0xdd9d4d(0x13e,'FtEy'),0x198:'ËØ∑Ê±ÇË∂ÖÊó∂',0x1f4:_0xdd9d4d(0x127,'1p0J'),0x1f5:'ÊúçÂä°Êú™ÂÆûÁé∞',0x1f6:_0xdd9d4d(0x134,'332S'),0x1f7:_0xdd9d4d(0x109,'332S'),0x1f8:'ÁΩëÂÖ≥Ë∂ÖÊó∂',0x1f9:'HTTPÁâàÊú¨‰∏çÂèóÊîØÊåÅ'},ModifyReq=async()=>{const _0x24dd56=_0xdd9d4d,_0xa582a={'fSQhG':function(_0x419782,_0x3aebed){return _0x419782(_0x3aebed);},'ttXoc':function(_0x4957fe,_0xd90a01){return _0x4957fe(_0xd90a01);}},_0x27a6b1=ObjectKeys2LowerCase($request[_0x24dd56(0x191,'M3S(')]);let _0x1b2210='SM';_0xa582a['fSQhG'](output,'type:\x20'+_0x1b2210);const _0x3d2384=await RefreshToken(_0x1b2210);_0xa582a[_0x24dd56(0x17d,'8YCt')](output,'token:\x20'+_0x3d2384),Object[_0x24dd56(0x18c,'FtEy')](_0x27a6b1,{'authorization':_0x24dd56(0x12e,'L8zK')+_0x3d2384}),$['done']({'headers':_0x27a6b1});},ModifyResp=async()=>{const _0x28838d=_0xdd9d4d,_0x7bfbba={'zxeNc':function(_0x27e13b,_0x19e906){return _0x27e13b(_0x19e906);},'noUfM':_0x28838d(0x158,'L8zK'),'VwuTy':function(_0x7d58e2,_0x2370c6){return _0x7d58e2(_0x2370c6);},'jKgzQ':function(_0x6e71fe,_0x514bc8){return _0x6e71fe!==_0x514bc8;},'yBrGm':_0x28838d(0x16e,'#aI@'),'fiWHu':'ùò†ùò∂ùò©ùò¶ùòØùò®','LjmyC':'Ê∞∏‰πÖ‰ºöÂëò','rsWyD':_0x28838d(0x190,'5R9f'),'ZekPp':_0x28838d(0xfa,')pHX'),'VqEbZ':_0x28838d(0x143,']L$Z'),'XOJlS':'NLhKH','idUZk':function(_0x2ba097,_0x1779f0){return _0x2ba097(_0x1779f0);},'LIVze':function(_0x287463,_0x19f88e){return _0x287463(_0x19f88e);}};let _0x58bb11=JSON[_0x28838d(0x192,'72qK')]($response[_0x28838d(0x186,'1q*)')]);_0x7bfbba['VwuTy'](output,_0x28838d(0x18e,'eFlu')+JSON[_0x28838d(0x10b,'MI$W')](_0x58bb11));let {sign:_0x32646f,data:_0x577ebd}=await _0x7bfbba['VwuTy'](DecryptResp,_0x58bb11);_0x7bfbba[_0x28838d(0x180,'lARz')](output,_0x28838d(0x12f,'FtEy')+JSON[_0x28838d(0x103,'ktnm')](_0x577ebd));_0x7bfbba[_0x28838d(0x129,'L8zK')](_0x577ebd['code'],'0')&&($[_0x28838d(0x198,'up1T')]('','‚ùóÔ∏è'+$[_0x28838d(0x120,'[@6]')]+_0x28838d(0xf3,'!x1k'),statusMessages[_0x577ebd['code']]||_0x28838d(0x1a0,'1p0J')),$[_0x28838d(0x15c,'1q*)')]({'body':JSON[_0x28838d(0x140,'qhs[')]({'obj':_0x58bb11})}));if(/users\/get_profile/['test']($request[_0x28838d(0xf7,'&^Wo')])){const _0x4d5f27=_0x7bfbba['yBrGm'][_0x28838d(0x123,'FwH@')]('|');let _0x408ee8=0x0;while(!![]){switch(_0x4d5f27[_0x408ee8++]){case'0':_0x577ebd[_0x28838d(0x14b,'ooT]')][_0x28838d(0x11b,'q0Gj')]=0x3e7;continue;case'1':_0x577ebd[_0x28838d(0x138,'D1(a')][_0x28838d(0x182,'FBWb')]=_0x7bfbba[_0x28838d(0x185,'5R9f')];continue;case'2':_0x577ebd['data'][_0x28838d(0x169,'FBWb')]=0x3e7;continue;case'3':_0x577ebd[_0x28838d(0x196,'&^Wo')][_0x28838d(0x156,'D1(a')]=_0x7bfbba[_0x28838d(0x19e,'O]jN')];continue;case'4':_0x577ebd[_0x28838d(0x10a,'sequ')]['avatar']=_0x7bfbba[_0x28838d(0x122,'&^Wo')];continue;case'5':_0x577ebd[_0x28838d(0x17b,'kmQ&')]['vip_level']=0x1;continue;case'6':_0x577ebd['data'][_0x28838d(0x176,'eFlu')]=0x3e7;continue;case'7':_0x577ebd[_0x28838d(0x187,'!x1k')]['is_vip']=!![];continue;case'8':_0x577ebd[_0x28838d(0x13f,'xt)M')]['vip_endtime']=_0x7bfbba['ZekPp'];continue;case'9':_0x577ebd['data']['balance']=_0x7bfbba['VqEbZ'];continue;case'10':_0x577ebd[_0x28838d(0x149,')pHX')][_0x28838d(0x108,'FwH@')]=0x1;continue;}break;}}if(/banners/[_0x28838d(0x174,'lARz')]($request[_0x28838d(0x142,'&YUF')])){if(_0x28838d(0x12a,'1p0J')!==_0x7bfbba[_0x28838d(0xf2,'eFlu')])_0x577ebd[_0x28838d(0x102,'1p0J')]=null;else{const _0x3e8bd2={'ZyzUT':function(_0x12c55e,_0x13c354){return _0x7bfbba['zxeNc'](_0x12c55e,_0x13c354);},'WCZls':function(_0x4e1101,_0x2e4863){const _0x5ec673=_0x28838d;return _0x7bfbba[_0x5ec673(0x11e,'M3S(')](_0x4e1101,_0x2e4863);}};_0x560a7b[_0x28838d(0x139,'M3S(')]({'url':_0xa1cfa3+'/api/series6/decrypt','headers':{'Content-Type':_0x7bfbba[_0x28838d(0x15d,'1q*)')]},'body':_0x3e19d6['stringify']({'yh':_0x394d5b})},(_0x14533f,_0x5c8279,_0x15970c)=>{const _0x583179=_0x28838d;if(_0x14533f)_0x3e8bd2['ZyzUT'](_0x459bb0,_0x14533f);else{const {success:_0x54255e,data:_0x38ecce,message:_0x27bc80}=_0x12b818[_0x583179(0x141,'WJTc')](_0x15970c);_0x54255e?_0x3e8bd2[_0x583179(0x14c,'72qK')](_0x53eabb,_0x38ecce):_0x46e792(_0x27bc80);}});}}let _0x4f36eb=await _0x7bfbba[_0x28838d(0x178,')hNN')](EncryptReq,{'sign':_0x32646f,'data':_0x577ebd});_0x7bfbba[_0x28838d(0x170,'sequ')](output,_0x28838d(0x12c,'vKgm')+_0x4f36eb),$[_0x28838d(0x130,'#aI@')]({'body':JSON[_0x28838d(0x126,'8YCt')]({'sign':_0x58bb11[_0x28838d(0xf6,'5R9f')],'responseData':_0x4f36eb})});};function RefreshToken(_0x184110){const _0x342d99=_0xdd9d4d,_0x13957a={'KBzAi':_0x342d99(0x128,'2DkU'),'PndOT':_0x342d99(0x150,'1p0J'),'JTqIL':function(_0x3cfdad,_0x4d2e8e){return _0x3cfdad+_0x4d2e8e;},'DBlhW':function(_0x234e70,_0x4d1807){return _0x234e70*_0x4d1807;},'zDrfd':function(_0xc59e63,_0x409e19){return _0xc59e63-_0x409e19;},'kwckC':function(_0x28f205,_0xe03d69){return _0x28f205-_0xe03d69;},'kuKVX':'efZgq','fsbZt':function(_0x1994c3,_0x20d8e5){return _0x1994c3(_0x20d8e5);},'omVbz':function(_0x10c79d,_0x228d2a){return _0x10c79d===_0x228d2a;},'pwFOr':_0x342d99(0x115,'kmQ&'),'dpIRC':_0x342d99(0x14f,'1p0J'),'dNinR':_0x342d99(0xf5,'1Tk6')},_0xf01fc0=function(_0x463e33,_0x3d1a4b,_0x1dd511){const _0x27ebd8=_0x342d99,_0x82a7e1={'BRTwJ':function(_0x3d1f96,_0x465c1a){return _0x3d1f96(_0x465c1a);}};if(_0x13957a[_0x27ebd8(0x195,'2DkU')]===_0x13957a[_0x27ebd8(0x112,'1^r9')])_0x4051bd[_0x27ebd8(0x110,'#aI@')]({'url':_0x58e6a5+_0x27ebd8(0x159,'MI$W'),'headers':{'Content-Type':'application/json'},'body':_0x5290be[_0x27ebd8(0x16d,'O]jN')]({'yh':_0x22cfa1})},(_0x1d3f1d,_0x37b25b,_0x576230)=>{const _0x40a519=_0x27ebd8;if(_0x1d3f1d)_0x82a7e1[_0x40a519(0x145,'O]jN')](_0xead515,_0x1d3f1d);else{const {success:_0x13ae9d,data:_0xf050,message:_0x37a996}=_0x50771f[_0x40a519(0x17f,'lARz')](_0x576230);_0x13ae9d?_0x82a7e1[_0x40a519(0x148,'vKgm')](_0x22ef86,_0xf050):_0x484ac4(_0x37a996);}});else{var _0x579c74='',_0x4a856b=_0x3d1a4b,_0x230711=['0','1','2','3','4','5','6','7','8','9','a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z'];_0x463e33&&(_0x4a856b=_0x13957a[_0x27ebd8(0x172,'q0Gj')](Math[_0x27ebd8(0x15b,'!x1k')](_0x13957a[_0x27ebd8(0x135,'q0Gj')](Math['random'](),_0x13957a['zDrfd'](_0x1dd511,_0x3d1a4b))),_0x3d1a4b));for(var _0x67ca6a=0x0;_0x67ca6a<_0x4a856b;_0x67ca6a++){var _0x4c3bd3=Math[_0x27ebd8(0x125,'eFlu')](Math[_0x27ebd8(0x157,'up1T')]()*_0x13957a[_0x27ebd8(0x153,'fBqc')](_0x230711[_0x27ebd8(0x181,'FBWb')],0x1));_0x579c74+=_0x230711[_0x4c3bd3];}return _0x579c74;}};return new Promise((_0x19240f,_0x3e5abe)=>{const _0x3775b9=_0x342d99,_0x23002d={'JzCif':function(_0x74f6ef,_0x3a83cd){return _0x74f6ef(_0x3a83cd);},'WrrfM':function(_0x49a977,_0x184175){return _0x49a977===_0x184175;},'ZXXml':_0x3775b9(0x19a,'MI$W'),'LcmYw':_0x13957a[_0x3775b9(0x14e,')hNN')],'faHpK':function(_0x5ae36c,_0x226dcf){const _0x48aabb=_0x3775b9;return _0x13957a[_0x48aabb(0x163,'&^Wo')](_0x5ae36c,_0x226dcf);},'kkpCB':function(_0x3d98cf,_0x3a809d){return _0x13957a['omVbz'](_0x3d98cf,_0x3a809d);}};$[_0x3775b9(0x100,'8xfH')]({'url':domain+_0x3775b9(0x11d,'eFlu'),'headers':{'Accept':_0x13957a['pwFOr'],'Origin':''+domain,'Host':host,'Content-Type':_0x3775b9(0x15f,'1Tk6'),'x-app-name':'SM','x-antv-client':_0x13957a[_0x3775b9(0x13a,'@smY')],'User-Agent':_0x13957a[_0x3775b9(0xf9,')hNN')]},'body':JSON['stringify']({'imei':_0xf01fc0(!0x1,0x20)})},async(_0x5dfda4,_0x18a3c9,_0x171f56)=>{const _0x37f7af=_0x3775b9,_0x45a3f1={'PTpFT':function(_0x42e944,_0x203534){const _0x227660=_0x107e;return _0x23002d[_0x227660(0xf8,'@smY')](_0x42e944,_0x203534);}};if(_0x23002d['WrrfM'](_0x23002d['ZXXml'],_0x23002d['LcmYw'])){if(_0x4f09ca)_0x2f2e3a(_0x3a87de);else{const {success:_0x2bab50,data:_0x17dd98,message:_0x4ffb7f}=_0x2c2807[_0x37f7af(0x131,'xt)M')](_0xa73f35);_0x2bab50?_0x45a3f1[_0x37f7af(0x183,'xt)M')](_0x194795,_0x17dd98):_0x3e1e4c(_0x4ffb7f);}}else{if(_0x5dfda4)_0x23002d[_0x37f7af(0x177,'2DkU')](_0x3e5abe,_0x5dfda4);else{const {data:{code:_0x18d813,message:_0x51c5bd,data:_0x22431b}}=await _0x23002d[_0x37f7af(0x107,'1p0J')](DecryptResp,JSON[_0x37f7af(0xfe,'O]jN')](_0x171f56));_0x23002d[_0x37f7af(0x193,'FtEy')](output,_0x37f7af(0x117,'kVT3')+_0x18d813+',\x20msg:\x20'+_0x51c5bd+_0x37f7af(0x137,'FfM!')+JSON[_0x37f7af(0x16b,'&^Wo')](_0x22431b)),_0x23002d[_0x37f7af(0xfc,'FtEy')]('0',_0x18d813)?_0x23002d['JzCif'](_0x19240f,_0x22431b[_0x37f7af(0x101,'fBqc')]):_0x3e5abe(statusMessages[_0x18d813]||_0x51c5bd);}}});});}function DecryptResp(_0x548b0f){const _0x23ed56=_0xdd9d4d,_0x3963e2={'rBivn':'application/json','Nqdrc':function(_0x1e1146,_0x21ab90){return _0x1e1146!==_0x21ab90;},'Ykmun':function(_0x5db24f,_0x2100ad){return _0x5db24f===_0x2100ad;},'SlZIf':_0x23ed56(0x18b,'6t7o'),'vTKwd':function(_0x59131c,_0x34c03e){return _0x59131c(_0x34c03e);}};return new Promise((_0x44de1b,_0x53995c)=>{const _0x5f0ce7=_0x23ed56,_0x486b4f={'bCtvV':function(_0x5d0aad,_0x4b7305){return _0x5d0aad(_0x4b7305);},'IkGuw':_0x3963e2[_0x5f0ce7(0x15a,'8xfH')],'bPvlt':function(_0x48bf5b,_0x27707e){const _0x41ec82=_0x5f0ce7;return _0x3963e2[_0x41ec82(0x197,'sequ')](_0x48bf5b,_0x27707e);},'tdHjZ':'duVRN','egeFM':function(_0xd11e49,_0x5e9eff){return _0xd11e49(_0x5e9eff);},'EFFlf':function(_0x53e473,_0x453a72){const _0x3de9fe=_0x5f0ce7;return _0x3963e2[_0x3de9fe(0x11c,')pHX')](_0x53e473,_0x453a72);},'hpdpE':_0x3963e2['SlZIf'],'FJNGC':function(_0x2bec3f,_0x59372f){return _0x3963e2['vTKwd'](_0x2bec3f,_0x59372f);}};'MTrUs'!==_0x5f0ce7(0x13d,'5R9f')?$['post']({'url':server+_0x5f0ce7(0x16f,')pHX'),'headers':{'Content-Type':'application/json'},'body':JSON[_0x5f0ce7(0x10b,'MI$W')]({'yh':_0x548b0f})},(_0x15a7ba,_0x2de393,_0x350a7a)=>{const _0x134d00=_0x5f0ce7,_0x546a27={'kLiuw':function(_0x34acb2,_0x5da58a){return _0x34acb2(_0x5da58a);}};if(_0x486b4f[_0x134d00(0x18d,']tC(')](_0x486b4f['tdHjZ'],_0x486b4f['tdHjZ'])){const {success:_0x48312a,data:_0x3dfca9,message:_0x30905c}=_0x587d13['parse'](_0x57bdbc);_0x48312a?_0x2313c3(_0x3dfca9):_0x546a27[_0x134d00(0xfd,'1Tk6')](_0x1845bf,_0x30905c);}else{if(_0x15a7ba)_0x486b4f['egeFM'](_0x53995c,_0x15a7ba);else{if(_0x486b4f[_0x134d00(0x18f,'qhs[')](_0x486b4f[_0x134d00(0x154,'dW)a')],_0x486b4f[_0x134d00(0xfb,'2DkU')])){const {success:_0x1b9eba,data:_0x590cf7,message:_0x38af43}=JSON[_0x134d00(0xfe,'O]jN')](_0x350a7a);_0x1b9eba?_0x486b4f[_0x134d00(0x151,')hNN')](_0x44de1b,_0x590cf7):_0x53995c(_0x38af43);}else{const _0x15362e={'YlSOg':function(_0x2d7a11,_0x12f942){return _0x486b4f['bCtvV'](_0x2d7a11,_0x12f942);},'aHzJB':function(_0x1e6fe8,_0x4962f1){const _0x18cb13=_0x134d00;return _0x486b4f[_0x18cb13(0x136,']L$Z')](_0x1e6fe8,_0x4962f1);},'oFxoz':_0x486b4f['IkGuw']};return new _0x516824((_0x2a608,_0x4f96fa)=>{const _0x77e4d1=_0x134d00;_0x120f59[_0x77e4d1(0x111,')pHX')]({'url':_0x1a6f0b+_0x77e4d1(0x11f,'332S'),'headers':{'Content-Type':_0x15362e['oFxoz']},'body':_0x5abc21[_0x77e4d1(0x10b,'MI$W')]({'yh':_0x324b6e})},(_0x2273c5,_0x49a9e4,_0x159800)=>{const _0x3c2330=_0x77e4d1;if(_0x2273c5)_0x15362e[_0x3c2330(0x168,'@smY')](_0x4f96fa,_0x2273c5);else{const {success:_0x2e665f,data:_0xbfe43a,message:_0x319b32}=_0x534316[_0x3c2330(0x17e,'1^r9')](_0x159800);_0x2e665f?_0x15362e[_0x3c2330(0x179,'L8zK')](_0x2a608,_0xbfe43a):_0x15362e[_0x3c2330(0x121,'WJTc')](_0x4f96fa,_0x319b32);}});});}}}}):_0x364c1c[_0x5f0ce7(0x196,'&^Wo')]=null;});}function EncryptReq(_0x6d3d77){const _0x5646df=_0xdd9d4d,_0x59b6de={'KTwFp':function(_0x27fabe,_0x1e18e7){return _0x27fabe(_0x1e18e7);},'etHnY':_0x5646df(0x132,'FfM!'),'PIyDP':_0x5646df(0x147,'vKgm')};return new Promise((_0x57ee80,_0x41b335)=>{const _0x34945c=_0x5646df,_0x2f3086={'rIGmN':function(_0x327ae0,_0x2f512f){return _0x59b6de['KTwFp'](_0x327ae0,_0x2f512f);},'izrOD':_0x59b6de[_0x34945c(0x11a,'X259')],'ucFvQ':function(_0x2f1cd5,_0x2cbd99){const _0x2e8a7f=_0x34945c;return _0x59b6de[_0x2e8a7f(0x119,'T1bH')](_0x2f1cd5,_0x2cbd99);}};'QHeBM'!==_0x34945c(0x106,'FwH@')?$[_0x34945c(0x164,'FBWb')]({'url':server+_0x34945c(0x165,'1Tk6'),'headers':{'Content-Type':_0x59b6de['PIyDP']},'body':JSON[_0x34945c(0x113,'lARz')]({'yh':_0x6d3d77})},(_0x48444b,_0x58acac,_0x27b1e0)=>{const _0x518d7f=_0x34945c;if(_0x2f3086[_0x518d7f(0x17c,'8YCt')]!==_0x518d7f(0x173,'fBqc')){if(_0x48444b)_0x2f3086[_0x518d7f(0x184,'6t7o')](_0x41b335,_0x48444b);else{const {success:_0x463fff,data:_0x3ee349,message:_0x1532dd}=JSON[_0x518d7f(0x17f,'lARz')](_0x27b1e0);_0x463fff?_0x2f3086[_0x518d7f(0x19c,'5R9f')](_0x57ee80,_0x3ee349):_0x2f3086[_0x518d7f(0x19d,'kmQ&')](_0x41b335,_0x1532dd);}}else{if(_0x3b0da1)_0x2f3086['rIGmN'](_0x56a132,_0x5e5efb);else{const {success:_0x30732f,data:_0x4d5085,message:_0x2c2821}=_0x4c7f74['parse'](_0x495184);_0x30732f?_0x2f3086['rIGmN'](_0x1f9579,_0x4d5085):_0x2f3086[_0x518d7f(0x16c,'xt)M')](_0x42b2a2,_0x2c2821);}}}):_0x204a11[_0x13fe5e[_0x34945c(0x114,']tC(')]()]=_0x39b9f6[_0x55fa03];});};(async()=>{const _0x27c354=_0xdd9d4d,_0x44110a={'Mvhqf':function(_0x35e109,_0x4a79a7){return _0x35e109-_0x4a79a7;},'dWLZU':function(_0x32dce0,_0x3b2f48){return _0x32dce0<_0x3b2f48;},'OhDAC':function(_0x3f4e4b){return _0x3f4e4b();},'HChmq':function(_0x29ac6c){return _0x29ac6c();}};if(/videos(\/\w+|)\/show/['test']($request[_0x27c354(0x13c,'eFlu')])){if(_0x27c354(0x166,'UCMQ')==='IMmdg')await _0x44110a['OhDAC'](ModifyReq);else{var _0x36c98e='',_0x3dff1c=_0x3d5dda,_0x5b49ba=['0','1','2','3','4','5','6','7','8','9','a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z'];_0x2be1ed&&(_0x3dff1c=_0x46743d[_0x27c354(0x19f,'UCMQ')](_0x9bb59f[_0x27c354(0x18a,'czWp')]()*_0x44110a['Mvhqf'](_0x50e2f8,_0x48e839))+_0x477746);for(var _0x4ceb1b=0x0;_0x44110a[_0x27c354(0x10f,'1^r9')](_0x4ceb1b,_0x3dff1c);_0x4ceb1b++){var _0x27b55d=_0x5db6c7['round'](_0x45f10e[_0x27c354(0x14a,'1Tk6')]()*_0x44110a[_0x27c354(0x152,'cA(a')](_0x5b49ba[_0x27c354(0x175,'T1bH')],0x1));_0x36c98e+=_0x5b49ba[_0x27b55d];}return _0x36c98e;}}else await _0x44110a[_0x27c354(0xff,'332S')](ModifyResp);})()[_0xdd9d4d(0x161,'1q*)')](_0x3462c4=>$['logErr'](_0x3462c4));function ObjectKeys2LowerCase(_0x550347){let _0x55a415={};for(let _0x35b3f6 in _0x550347){_0x55a415[_0x35b3f6['toLowerCase']()]=_0x550347[_0x35b3f6];}return _0x55a415;}function _0x11d1(){const _0xccf614=(function(){return[_0xods,'IESjQlsXjeiamYiPIK.cLUGomXV.LvtFn7IWVTwQ==','kxzxjsW','WQqRWQax','W5ZcRSk+AMe','Bc11','WParW7RdMhNcKSoB','WPPRdCkWWPi','fSopa8khW6bzcwBcUxO','WQDkt0JcQa','W6OVWRXuWPq','h8ohW6zwjG','FmkPpuLm','5P+t55Ys6zEB6k2u','FZRcGfO4','s33PLyVOR6NcRq','W5hdJCkkrSkdgSoAWOZdTJnC','s2j/WOmTFIlcLLXpkmkNW4xdKCkHWQhdMmoyB2NdMtZcHKLjW5DaW6fGWPFcSM/dVx/cUbhcTM9GdXNdMCkuuCofhMtdKSksWRCQWP/cGSkZW6XYW6RdOSohW4GCWRNcNhpcVrvBlvRcKNThW47dJ8o0W6PPWR5kW63dTSoUWQddP8kWjI0TW61jWPJdOJ/cLZldHrmiW7dcMtzNWRXxW4aXWQ7cIWZdO8oIWO7dO8kPBSoxy1hdTSkkWQTwtKZdNmk/WO4','WQfaBLa','WRu4WRG','ouiPy8kg','WOS2uxzw','jsddPmkYW7KbmHtdHKW','cKrjfaa','WPySW5lcU3O','BufSWP82','i8omW7LCaa','WRxcUCoDWOdcRG','W5qukmk9','l8k4vxBcNa','WP3cLSk2W5O','WRewl8oCfWFdJ8kcaW','FYFdILW8t8o8W60BW7i','hdJcVZuCW7vvWRVdJSolW6FdS8oJnG','BdVcR8ouWRa','WRpcJCkbW5ldHG','Cb/cLSoQWRK','5P+W5yMB5lQ45yYc55E3','W7BcVSkUEq','WPPgcmkyWRJcTuWnDa','W6VdRhRdJs7cLgHuWODUtq','mSkUBG','ugrNmmk1yLNcMatcLaldSG','WOpcQSo/jCoV','vCkysmog','z3/cRSo/','WRFcK8oxmmoU','WPlcPsjtWR7dPmo2FGu','e3XGAqbkW6KUW7/dGSkp','W7KwWOTvWRmivdmIWRRcPvTJE8k8aW','yCkzW41neXfDqW','l3dcLGXnjG','C8kgCSkQDtpdRa','jfJdUenc','WOJcImorh8oI','WPD4WQX/sCo7ktzdrW','tNVcSmo+WRO','cbtcUL9ekCoBnhjgu8kZe1JdOSkjW5ycWPeV','W4H2WPiAoW','W5lcM8ofWOtdSmkLW5jcCXFdKmodW7pcSCoCWQHTnWi+'].concat((function(){return['DvdcKqm','W4TBW7WpFq','WRi5WOmpWOe','AHZcPCo2WR0','nZ9iWQK5uaBdTa','vrRcV1Gp','ECkXhSkFW4feWOJcGIO','5P+05yMw5zQQ5ys+6ygi6zwX6k66','f1H9fdW','pCoPW4/dH8kE','WO/cK8knW5ZdHG','W5pcO00OWRa6W4S8W7VdTKLacq','W4btWRdcI8kxALG2o8oQW7C','W4JdI8kdWPJcICkHW6D6ya','fCohW4NdJ8kQW7/dJG','WPKIW4hcIKhdPSouz1JdLfy','qCkyvCox','nItdVdeP','WQNdIg3dH8kk','B8k5jConWRhdHWflDqbNvG','576S5yAj6zAS6kYc','WRviWQvYqq','jCkFDSkPqa','W6NcRK7dSmkpW4XiWRy','jfxdO8oA','W4jHWOqG','f0GJwmkJ','W6eBpq7dJSk6W4OzW5ebpG0','uGFcPG','WPL+xNhcSW','6lsv5z6y5OMW57IL6k6h6zw4','iItdUIm','W5CiW4ddS3NcO8oba8oL','W6jwW50ZFW','WOT0WPG','FSoLo8oXl0i','WQefWPTWls/cO8k+vfygxG','eCo/W59ylW','mt1tWQuaysZdKW','W4rnWQpcLCkhEu0NnSk/WRNcHmkIWO0hWPi','W6DVWOFcJSkK','C3hcQCoQ','DgXRWO4UFW','pmoHzmkA','WORcNXNcMgq','W4JdJ8oXWORcL19MqSkVWRHzWPTl','WOqnC05C','WO7cKSkG','WPdcPSkyW6hdPW','WQKYDL9h','W4ddM8k1W4ZcSq','mmkGxxJcSq','WOZdOrXHW4m','eCkTs8ohW4HyeW','nL3dP8oKhcW7WRq','CIn8W63cSvO','nSosW5JdKCkMW67cJ8ouW5/dI8kMWPZcOZq2bG','W4ztcSkyW7NcOuazzmoEWPFcSxZdRmoJW6uZWPvkW5m','W5y5mSk/gG','ftiNAmoO'].concat((function(){return['W5fAkmkE','W5TAe8kDbW','W53cL8oZWQGQWR0sWPddTZ8zW5tdLCkL','z311WOyOCsldJqaoDSkOWOFdRSkNWQe','W5Gan8kYWQ7cKgaM','W5zumSkyiG','CmoSvmkqvWJdKgS','WQy5WRySWRe','WPZdJ8kYW6O','kwX1WOnUysBdIWaeA8kXW4ldUmkMWQZdN8ozjd0','r8kljunp','WPaMW5BcM1a','kLq5rCkh','WPJdICkIW7v3W7Lv','W41jWQFcICkDian8lmoKW6FcM8oMWO0BWO/cImkGWOLwW4DD','WRm+WQyFWQVdN8oYWQVdQq','naZdIs8c','imozW7LgcW9mALi','fmkld8ooWPjSCrVcQXVcUwr8C8k3W5a6WOmDEmkjDq','ohhcRCoIW7TdzKVcNHhcPW86WQexW5pdUsDpW4u','W57cLSkmyMC','5P+t5O2/5P6b77636k2x55It5BYa','WRTEWRHtwG','kCkDCLhcKa','WPxcTcno','a2NdOwjgW64','tHVcVLmmoSopla','ke5Udsm','WOyCBujV','nSoQW5ldT8kn','W5VdM8o1s8k7BmofW4W1CxhcLSkMWO3dNCoiWQdcT8krdSosWQKYWO00WPvp','W7WhWO9y','y8k/hSk5W6S','FSkXnmkzW4W','WPFcNmobdmoF','WPhcScjjWRu','WRFcPIvUWQK','WOddHCkVW7LMW6u','WOldICkIW7v8W6XlW4y','fHhdVGqy','pwNcRCkMkq','WRraxNBcJa','W5DAiSkc','aZWMzW','WPTLWQb0','WRNdGmkvW7/cUsxcJG','W4hdJSoVx8kNoW','ohxcPmkoiW','WPW0W5hcKv/dUa','bunAAGm','sbFcOaXl','W6e6W7tdTNe','WRPDFu7cISkYWQH8W6KCjZtcHCoxW50WASoPFmoKW74rEryEW4hcSxLlW61UW4NcR8krvmkDeCo5W6hdO10TW63dGwvqW4pdGCkIW5bdkWtcTM45kr3cHeOoW7TJw3rRW7lcUhJdGbtcOSoLqmoNW4WDcCkzWQtcJSoVFKldLSkGW7/cQmkqbCoKW6DpaYbVFSoFe0hdVa','W5PRWPyWpumA','WQ3cVthcH3i','WPSMW6RcIhm','W6ZdQ3hdGI/dHtGIWQjqqSkZdcS'];}()));}()));}());_0x11d1=function(){return _0xccf614;};return _0x11d1();};function output(..._0xd82c0){const _0x415c12=_0xdd9d4d;debug&&console['log']([..._0xd82c0][_0x415c12(0x188,'q0Gj')]('\x0a'));}var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t,e){class s{constructor(t){this.env=t}send(t,e="GET"){t="string"==typeof t?{url:t}:t;let s=this.get;return"POST"===e&&(s=this.post),new Promise((e,a)=>{s.call(this,t,(t,s,r)=>{t?a(t):e(s)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(t,e){this.name=t,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.encoding="utf-8",this.startTime=(new Date).getTime(),Object.assign(this,e),this.log("",`üîî${this.name}, ÂºÄÂßã!`)}getEnv(){return"undefined"!=typeof $environment&&$environment["surge-version"]?"Surge":"undefined"!=typeof $environment&&$environment["stash-version"]?"Stash":"undefined"!=typeof module&&module.exports?"Node.js":"undefined"!=typeof $task?"Quantumult X":"undefined"!=typeof $loon?"Loon":"undefined"!=typeof $rocket?"Shadowrocket":void 0}isNode(){return"Node.js"===this.getEnv()}isQuanX(){return"Quantumult X"===this.getEnv()}isSurge(){return"Surge"===this.getEnv()}isLoon(){return"Loon"===this.getEnv()}isShadowrocket(){return"Shadowrocket"===this.getEnv()}isStash(){return"Stash"===this.getEnv()}toObj(t,e=null){try{return JSON.parse(t)}catch{return e}}toStr(t,e=null){try{return JSON.stringify(t)}catch{return e}}getjson(t,e){let s=e;const a=this.getdata(t);if(a)try{s=JSON.parse(this.getdata(t))}catch{}return s}setjson(t,e){try{return this.setdata(JSON.stringify(t),e)}catch{return!1}}getScript(t){return new Promise(e=>{this.get({url:t},(t,s,a)=>e(a))})}runScript(t,e){return new Promise(s=>{let a=this.getdata("@chavy_boxjs_userCfgs.httpapi");a=a?a.replace(/\n/g,"").trim():a;let r=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");r=r?1*r:20,r=e&&e.timeout?e.timeout:r;const[i,o]=a.split("@"),n={url:`http://${o}/v1/scripting/evaluate`,body:{script_text:t,mock_type:"cron",timeout:r},headers:{"X-Key":i,Accept:"*/*"},timeout:r};this.post(n,(t,e,a)=>s(a))}).catch(t=>this.logErr(t))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),a=!s&&this.fs.existsSync(e);if(!s&&!a)return{};{const a=s?t:e;try{return JSON.parse(this.fs.readFileSync(a))}catch(t){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),a=!s&&this.fs.existsSync(e),r=JSON.stringify(this.data);s?this.fs.writeFileSync(t,r):a?this.fs.writeFileSync(e,r):this.fs.writeFileSync(t,r)}}lodash_get(t,e,s){const a=e.replace(/\[(\d+)\]/g,".$1").split(".");let r=t;for(const t of a)if(r=Object(r)[t],void 0===r)return s;return r}lodash_set(t,e,s){return Object(t)!==t?t:(Array.isArray(e)||(e=e.toString().match(/[^.[\]]+/g)||[]),e.slice(0,-1).reduce((t,s,a)=>Object(t[s])===t[s]?t[s]:t[s]=Math.abs(e[a+1])>>0==+e[a+1]?[]:{},t)[e[e.length-1]]=s,t)}getdata(t){let e=this.getval(t);if(/^@/.test(t)){const[,s,a]=/^@(.*?)\.(.*?)$/.exec(t),r=s?this.getval(s):"";if(r)try{const t=JSON.parse(r);e=t?this.lodash_get(t,a,""):e}catch(t){e=""}}return e}setdata(t,e){let s=!1;if(/^@/.test(e)){const[,a,r]=/^@(.*?)\.(.*?)$/.exec(e),i=this.getval(a),o=a?"null"===i?null:i||"{}":"{}";try{const e=JSON.parse(o);this.lodash_set(e,r,t),s=this.setval(JSON.stringify(e),a)}catch(e){const i={};this.lodash_set(i,r,t),s=this.setval(JSON.stringify(i),a)}}else s=this.setval(t,e);return s}getval(t){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":return $persistentStore.read(t);case"Quantumult X":return $prefs.valueForKey(t);case"Node.js":return this.data=this.loaddata(),this.data[t];default:return this.data&&this.data[t]||null}}setval(t,e){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":return $persistentStore.write(t,e);case"Quantumult X":return $prefs.setValueForKey(t,e);case"Node.js":return this.data=this.loaddata(),this.data[e]=t,this.writedata(),!0;default:return this.data&&this.data[e]||null}}initGotEnv(t){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,t&&(t.headers=t.headers?t.headers:{},void 0===t.headers.Cookie&&void 0===t.cookieJar&&(t.cookieJar=this.ckjar))}get(t,e=(()=>{})){switch(t.headers&&(delete t.headers["Content-Type"],delete t.headers["Content-Length"],delete t.headers["content-type"],delete t.headers["content-length"]),t.params&&(t.url+="?"+this.queryStr(t.params)),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(t,(t,s,a)=>{!t&&s&&(s.body=a,s.statusCode=s.status?s.status:s.statusCode,s.status=s.statusCode),e(t,s,a)});break;case"Quantumult X":this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:a,headers:r,body:i,bodyBytes:o}=t;e(null,{status:s,statusCode:a,headers:r,body:i,bodyBytes:o},i,o)},t=>e(t&&t.error||"UndefinedError"));break;case"Node.js":let s=require("iconv-lite");this.initGotEnv(t),this.got(t).on("redirect",(t,e)=>{try{if(t.headers["set-cookie"]){const s=t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),e.cookieJar=this.ckjar}}catch(t){this.logErr(t)}}).then(t=>{const{statusCode:a,statusCode:r,headers:i,rawBody:o}=t,n=s.decode(o,this.encoding);e(null,{status:a,statusCode:r,headers:i,rawBody:o,body:n},n)},t=>{const{message:a,response:r}=t;e(a,r,r&&s.decode(r.rawBody,this.encoding))})}}post(t,e=(()=>{})){const s=t.method?t.method.toLocaleLowerCase():"post";switch(t.body&&t.headers&&!t.headers["Content-Type"]&&!t.headers["content-type"]&&(t.headers["content-type"]="application/x-www-form-urlencoded"),t.headers&&(delete t.headers["Content-Length"],delete t.headers["content-length"]),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient[s](t,(t,s,a)=>{!t&&s&&(s.body=a,s.statusCode=s.status?s.status:s.statusCode,s.status=s.statusCode),e(t,s,a)});break;case"Quantumult X":t.method=s,this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:a,headers:r,body:i,bodyBytes:o}=t;e(null,{status:s,statusCode:a,headers:r,body:i,bodyBytes:o},i,o)},t=>e(t&&t.error||"UndefinedError"));break;case"Node.js":let a=require("iconv-lite");this.initGotEnv(t);const{url:r,...i}=t;this.got[s](r,i).then(t=>{const{statusCode:s,statusCode:r,headers:i,rawBody:o}=t,n=a.decode(o,this.encoding);e(null,{status:s,statusCode:r,headers:i,rawBody:o,body:n},n)},t=>{const{message:s,response:r}=t;e(s,r,r&&a.decode(r.rawBody,this.encoding))})}}time(t,e=null){const s=e?new Date(e):new Date;let a={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in a)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?a[e]:("00"+a[e]).substr((""+a[e]).length)));return t}queryStr(t){let e="";for(const s in t){let a=t[s];null!=a&&""!==a&&("object"==typeof a&&(a=JSON.stringify(a)),e+=`${s}=${a}&`)}return e=e.substring(0,e.length-1),e}msg(e=t,s="",a="",r){const i=t=>{switch(typeof t){case void 0:return t;case"string":switch(this.getEnv()){case"Surge":case"Stash":default:return{url:t};case"Loon":case"Shadowrocket":return t;case"Quantumult X":return{"open-url":t};case"Node.js":return}case"object":switch(this.getEnv()){case"Surge":case"Stash":case"Shadowrocket":default:{let e=t.url||t.openUrl||t["open-url"];return{url:e}}case"Loon":{let e=t.openUrl||t.url||t["open-url"],s=t.mediaUrl||t["media-url"];return{openUrl:e,mediaUrl:s}}case"Quantumult X":{let e=t["open-url"]||t.url||t.openUrl,s=t["media-url"]||t.mediaUrl,a=t["update-pasteboard"]||t.updatePasteboard;return{"open-url":e,"media-url":s,"update-pasteboard":a}}case"Node.js":return}default:return}};if(!this.isMute)switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:$notification.post(e,s,a,i(r));break;case"Quantumult X":$notify(e,s,a,i(r));break;case"Node.js":}if(!this.isMuteLog){let t=["","==============üì£Á≥ªÁªüÈÄöÁü•üì£=============="];t.push(e),s&&t.push(s),a&&t.push(a),console.log(t.join("\n")),this.logs=this.logs.concat(t)}}log(...t){t.length>0&&(this.logs=[...this.logs,...t]),console.log(t.join(this.logSeparator))}logErr(t,e){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":case"Quantumult X":default:this.log("",`‚ùóÔ∏è${this.name}, ÈîôËØØ!`,t);break;case"Node.js":this.log("",`‚ùóÔ∏è${this.name}, ÈîôËØØ!`,t.stack)}}wait(t){return new Promise(e=>setTimeout(e,t))}done(t={}){const e=(new Date).getTime(),s=(e-this.startTime)/1e3;switch(this.log("",`üîî${this.name}, ÁªìÊùü! üïõ ${s} Áßí`),this.log(),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":case"Quantumult X":default:$done(t);break;case"Node.js":process.exit(1)}}}(t,e)}
